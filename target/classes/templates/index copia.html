<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <title>M14-WhiteCollar</title>

  <!-- JQUERY -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"
    integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

  <!-- Boostrap -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.0/font/bootstrap-icons.css">
  <!--Custom Css-->

  <link rel="stylesheet" type="text/css" href="flipCard.css">
  <link rel="stylesheet" type="text/css" href="general.css">
</head>

<body>
  <div class="container">

    <!-- Shops Table -->
    <div id="accordion">
      <div th:each="shop : ${shops}" class="card">
        <div class="card-header row" th:attr="id='heading' + ${shop.id}">
          <div class="col-md-8">
            <h4 th:text="${shop.name} + '     Capacitat: ' + ${shop.population} + ' / ' + ${shop.capacity}"></h4>
          </div>
          <div class="col-md-4">
            <button class="btn btn-primary" type="button" data-toggle="collapse"
              th:attr="data-target='#collapseShop'+${shop.id}" aria-expanded="false" aria-controls="collapse">
              Editar
            </button>
            <a type="button" class="btn btn-primary" th:href="@{'/shopTable/' + ${shop.id}}">Entrar</a>
          </div>
        </div> 
      <!-- Collapse menu for each shop -->
      <!-- It's better with JS but my purpose for this Academic Exercise is try to use Thymeleaf for all I can-->
      <div class="collapse" th:attr="id='collapseShop'+ ${shop.id}, aria-labelledby='heading'+ ${shop.id}" data-parent="#accordion">
        <div class="card card-body">
          <form th:object="${Shop}" method="post" th:action="@{'/shopTable/' + ${shop.id} + '/updateShop/'}">
            <div class="input-group mt-3 mb-3">
              <div class="input-group-prepend w-25">
                <span class="input-group-text w-100">Nom</span>
              </div>
              <input class="form-control" type="text" th:value="${shop.name}" id="name" name="name"
                placeholder="Nom de la botiga." required>
            </div>
            <div class="input-group mt-3 mb-3">
              <div class="input-group-prepend w-25">
                <span class="input-group-text w-100">Capacitat</span>
              </div>
              <input class="form-control" type="number" th:value="${shop.capacity}" id="capacity" name="capacity"
                required>
            </div>
            <button type="button" class="btn btn-danger add" data-toggle="modal"
              th:attr="data-target='#shopDeleteModal'+${shop.id}">
              <i class="bi bi-person-plus-fill icon" style="margin-right: 5px;"></i>Eliminar</button>
            <button type="submit" class="btn btn-warning">Actualizar</button>
          </form>
        </div>
      </div>
      <!-- Delete Modal for each shop-->
      <!-- It's better with JS but my purpose for this Academic Exercise is try to use Thymeleaf for all I can-->
      <div class="modal fade" th:attr="id='shopDeleteModal'+${shop.id}" tabindex="-1" role="dialog"
        aria-labelledby="shopDeleteModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="shopDeleteModalLabel">Elminar quadres</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              Vols eliminar <strong>TOTS ELS QUADRES I LA BOTIGA?</strong>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
              <a type="button" class="btn btn-danger" th:href="@{'/shopTable/' + ${shop.id} + '/deleteshop/'}">Si</a>
            </div>
          </div>
        </div>
      </div>

      
    </div>











    <!-- New Shop Card -->
    <div class="col flip">
      <label class="label">
        <input type="checkbox" />
        <div class="card flip-inner">
          <div class="card-body flip-front">
            <h2 class="card-title">Crear una nova botiga</h2>
          </div>
          <div class="card-body flip-back">
            <form th:object="${Shop}" method="post" th:action="@{/shopTable}">

              <div class="input-group mt-3 mb-3">
                <div class="input-group-prepend w-25">
                  <span class="input-group-text w-100">Nom</span>
                </div>
                <input class="form-control" type="text" th:field="*{name}" placeholder="Nom de la botiga." required>
              </div>
              <div class="input-group mt-3 mb-3">
                <div class="input-group-prepend w-25">
                  <span class="input-group-text w-100">Capacitat</span>
                </div>
                <input class="form-control" type="number" th:field="*{capacity}" required>
              </div>
              <button type="submit" class="btn btn-success">Crear una nova botiga</button>

            </form>
          </div>
        </div>
      </label>
    </div>

  </div>




</body>

</html>